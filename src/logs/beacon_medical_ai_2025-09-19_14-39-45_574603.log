2025-09-19 14:39:48.820 | INFO     | core.vectorstore:initialize_vectorstore_for_edition:103 - Initializing vectorstore for 4th Edition
2025-09-19 14:39:48.820 | INFO     | core.vectorstore:initialize_vectorstore:86 - Loading existing vectorstore from /Users/mac/fivv/drmichelrice/BeaconMedAI/src/data/vectorstore_8k_batch_4th
2025-09-19 14:40:13.578 | INFO     | auth.authentication:validate_login:30 - Successful login for user: Tim
2025-09-19 14:40:13.580 | INFO     | __main__:login:145 - User Tim logged in
2025-09-19 14:40:23.822 | INFO     | core.vectorstore:initialize_vectorstore_for_edition:103 - Initializing vectorstore for 6th Edition
2025-09-19 14:40:23.824 | INFO     | core.vectorstore:initialize_vectorstore:86 - Loading existing vectorstore from /Users/mac/fivv/drmichelrice/BeaconMedAI/src/data/vectorstore_8k_batch_6th
2025-09-19 14:40:23.956 | INFO     | __main__:update_vectorstore:175 - Vectorstore updated to 6th Edition
2025-09-19 14:40:25.547 | INFO     | core.vectorstore:initialize_vectorstore_for_edition:103 - Initializing vectorstore for 6th Edition
2025-09-19 14:40:25.547 | INFO     | core.vectorstore:initialize_vectorstore:86 - Loading existing vectorstore from /Users/mac/fivv/drmichelrice/BeaconMedAI/src/data/vectorstore_8k_batch_6th
2025-09-19 14:40:25.720 | INFO     | core.user_data:__init__:36 - 
==================================================
NEW USER SESSION CREATED
Username: Tim
User ID: 64c70d45-dec5-43d9-b32d-c3a3ce8707d9
==================================================

2025-09-19 14:40:25.720 | INFO     | core.user_data:get_user_data:97 - Created new user data for: Tim
2025-09-19 14:40:25.723 | INFO     | __main__:generate:213 - Saved file: /var/folders/gg/t11kyrr16ndcf_c64k2qtbr40000gn/T/tmpjleuf_4j/AMA_Sample_Medical_Report_2.pdf, size: 56.12 KB
2025-09-19 14:40:25.724 | INFO     | __main__:collect_file_results:69 - Processing file: /var/folders/gg/t11kyrr16ndcf_c64k2qtbr40000gn/T/tmpjleuf_4j/AMA_Sample_Medical_Report_2.pdf, size: 56.12 KB
2025-09-19 14:40:25.724 | INFO     | processors.file_processors:process_file:33 - User Tim started processing 1 files
2025-09-19 14:40:25.724 | INFO     | __main__:__call__:51 - Progress: Processing file (0.0/None None)
2025-09-19 14:40:25.725 | INFO     | core.user_data:get_user_data:99 - Retrieved existing user data for: Tim
2025-09-19 14:40:25.725 | INFO     | __main__:__call__:51 - Progress: Processing file (0.1/None None)
2025-09-19 14:40:25.725 | INFO     | processors.file_processors:process_single_file:52 - Processing file /var/folders/gg/t11kyrr16ndcf_c64k2qtbr40000gn/T/tmpjleuf_4j/AMA_Sample_Medical_Report_2.pdf (1/1)
2025-09-19 14:40:25.725 | INFO     | __main__:__call__:51 - Progress: Processing file (0.05/None None)
2025-09-19 14:40:25.725 | INFO     | processors.file_processors:get_report_from_pdf:107 - Loading PDF /var/folders/gg/t11kyrr16ndcf_c64k2qtbr40000gn/T/tmpjleuf_4j/AMA_Sample_Medical_Report_2.pdf for user Tim
2025-09-19 14:40:25.806 | INFO     | core.user_data:get_user_data:99 - Retrieved existing user data for: Tim
2025-09-19 14:40:25.806 | INFO     | __main__:__call__:51 - Progress: Getting report (0.3/None None)
2025-09-19 14:40:25.806 | INFO     | __main__:__call__:51 - Progress: Getting report (0.05/None None)
2025-09-19 14:40:25.806 | INFO     | generators.report_generator:get_ama_impairment_report:55 - Generating impairment report for user Tim
2025-09-19 14:40:25.806 | INFO     | core.user_data:get_user_data:99 - Retrieved existing user data for: Tim
2025-09-19 14:40:25.806 | INFO     | __main__:__call__:51 - Progress: Getting report (0.1/None None)
2025-09-19 14:40:35.203 | INFO     | __main__:__call__:51 - Progress: Getting report (0.2/None None)
2025-09-19 14:40:35.208 | INFO     | __main__:__call__:51 - Progress: Getting report (0.3/None None)
2025-09-19 14:40:35.208 | INFO     | utils.helpers:get_metadata_filter:267 - Starting metadata filter generation
2025-09-19 14:40:39.057 | DEBUG    | utils.helpers:get_metadata_filter:288 - Extracted 20 terms: ['motor vehicle collision', 'whiplash-associated disorder', 'neck pain', 'headaches', 'muscle stiffness', 'soft tissue damage', 'anterior ligament instability', 'cervical spine', 'chronic neck pain', 'instability', 'orthopedic consultation', 'left femur fracture', 'malunion', 'gait disturbance', 'chronic ptsd', 'sleep disturbances', 'residual lower back pain', 'degenerative changes', 'lumbar spine', 'mri']
2025-09-19 14:40:39.063 | WARNING  | utils.helpers:get_metadata_filter:334 - No chapters found; using term-based filter only.
2025-09-19 14:40:39.064 | INFO     | utils.helpers:get_metadata_filter:335 - Term-based filter: {'terms': ['muscle', 'disorder', 'whiplash-associated', 'malunion', 'motor', 'instability', 'symptoms', 'muscle stiffness', 'chronic ptsd', 'soft tissue damage', 'cervical spine', 'headaches', 'sleep disturbances', 'neck pain', 'degenerative changes', 'stiffness', 'collision', 'residual lower back pain', 'range', 'pain']}
2025-09-19 14:40:39.065 | INFO     | generators.report_generator:get_ama_impairment_report:101 - Using term-based query: muscle disorder whiplash-associated malunion motor instability symptoms muscle stiffness chronic ptsd soft tissue damage cervical spine headaches sleep disturbances neck pain degenerative changes stiffness collision residual lower back pain range pain
2025-09-19 14:40:39.065 | INFO     | generators.report_generator:get_ama_impairment_report:105 - Retrieving AMA content with k=4, fetch_k=20, lambda_mult=0.5 based on 131 unique words
2025-09-19 14:40:42.842 | INFO     | generators.report_generator:get_ama_impairment_report:110 - Initially retrieved 8 documents
2025-09-19 14:40:42.844 | INFO     | __main__:__call__:51 - Progress: Getting report (0.35/None None)
2025-09-19 14:40:44.950 | INFO     | generators.report_generator:get_ama_impairment_report:114 - Reranked to 4 documents
2025-09-19 14:40:44.953 | INFO     | __main__:__call__:51 - Progress: Getting report (0.4/None None)
2025-09-19 14:40:48.878 | INFO     | __main__:__call__:51 - Progress: Getting report (0.5/None None)
2025-09-19 14:40:48.898 | INFO     | __main__:__call__:51 - Progress: Getting report (0.6/None None)
2025-09-19 14:40:54.512 | INFO     | generators.report_generator:get_ama_impairment_report:152 - Generated impairment report for user Tim
2025-09-19 14:40:54.512 | INFO     | __main__:__call__:51 - Progress: Getting report (0.9/None None)
2025-09-19 14:40:54.528 | INFO     | __main__:__call__:51 - Progress: Getting report (1.0/None None)
2025-09-19 14:40:54.556 | INFO     | __main__:__call__:51 - Progress: Getting report (1.0/None None)
2025-09-19 14:40:54.556 | INFO     | __main__:__call__:51 - Progress: Processing file (0.9/None None)
2025-09-19 14:40:54.557 | INFO     | __main__:__call__:51 - Progress: Getting report (0.1/None None)
2025-09-19 14:40:54.557 | INFO     | generators.combiner:get_combine_reports:30 - Combining reports for user Tim
2025-09-19 14:40:54.557 | INFO     | core.user_data:get_user_data:99 - Retrieved existing user data for: Tim
2025-09-19 14:40:54.569 | INFO     | generators.combiner:get_combine_reports:45 - Similarity with previous input 1: 0.4207
2025-09-19 14:40:54.569 | INFO     | __main__:__call__:51 - Progress: Getting report (0.2/None None)
2025-09-19 14:40:54.569 | INFO     | __main__:__call__:51 - Progress: Getting report (0.3/None None)
