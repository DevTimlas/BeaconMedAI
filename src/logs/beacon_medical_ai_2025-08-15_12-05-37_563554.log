2025-08-15 12:05:39.648 | INFO     | __main__:main:13 - Starting BeaconMedicalAi AMA application
2025-08-15 12:05:39.648 | INFO     | BeaconMedAI.core.vectorstore:initialize_vectorstore_for_edition:103 - Initializing vectorstore for 4th Edition
2025-08-15 12:05:39.648 | INFO     | BeaconMedAI.core.vectorstore:initialize_vectorstore:86 - Loading existing vectorstore from /Users/mac/fivv/drmichelrice/BeaconMedAI/src/data/vectorstore_8k_batch_4th
2025-08-15 12:05:39.872 | INFO     | BeaconMedAI.core.vectorstore:initialize_vectorstore_for_edition:103 - Initializing vectorstore for 4th Edition
2025-08-15 12:05:39.872 | INFO     | BeaconMedAI.core.vectorstore:initialize_vectorstore:86 - Loading existing vectorstore from /Users/mac/fivv/drmichelrice/BeaconMedAI/src/data/vectorstore_8k_batch_4th
2025-08-15 12:05:57.479 | INFO     | BeaconMedAI.auth.authentication:validate_login:33 - Successful login for user: Tim
2025-08-15 12:06:04.763 | INFO     | BeaconMedAI.core.vectorstore:initialize_vectorstore_for_edition:103 - Initializing vectorstore for 4th Edition
2025-08-15 12:06:04.767 | INFO     | BeaconMedAI.core.vectorstore:initialize_vectorstore:86 - Loading existing vectorstore from /Users/mac/fivv/drmichelrice/BeaconMedAI/src/data/vectorstore_8k_batch_4th
2025-08-15 12:06:05.104 | INFO     | BeaconMedAI.core.user_data:__init__:36 - 
==================================================
NEW USER SESSION CREATED
Username: Tim
User ID: 2c76f241-68ed-470c-b826-c0140f8337d8
==================================================

2025-08-15 12:06:05.105 | INFO     | BeaconMedAI.core.user_data:get_user_data:97 - Created new user data for: Tim
2025-08-15 12:06:05.135 | INFO     | BeaconMedAI.processors.file_processors:process_file:33 - User Tim started processing 1 files
2025-08-15 12:06:05.136 | INFO     | BeaconMedAI.core.user_data:get_user_data:99 - Retrieved existing user data for: Tim
2025-08-15 12:06:05.136 | INFO     | BeaconMedAI.processors.file_processors:process_single_file:52 - Processing file /private/var/folders/gg/t11kyrr16ndcf_c64k2qtbr40000gn/T/gradio/9853adc70cf79735bb12a4e45f8145aa628d78f2f60ea8af7b816db04666c13f/AMA Sample Medical Report 1.pdf (1/1)
2025-08-15 12:06:05.137 | INFO     | BeaconMedAI.processors.file_processors:get_report_from_pdf:107 - Loading PDF /private/var/folders/gg/t11kyrr16ndcf_c64k2qtbr40000gn/T/gradio/9853adc70cf79735bb12a4e45f8145aa628d78f2f60ea8af7b816db04666c13f/AMA Sample Medical Report 1.pdf for user Tim
2025-08-15 12:06:05.292 | INFO     | BeaconMedAI.core.user_data:get_user_data:99 - Retrieved existing user data for: Tim
2025-08-15 12:06:05.293 | INFO     | BeaconMedAI.generators.report_generator:get_ama_impairment_report:55 - Generating impairment report for user Tim
2025-08-15 12:06:05.293 | INFO     | BeaconMedAI.core.user_data:get_user_data:99 - Retrieved existing user data for: Tim
2025-08-15 12:06:11.055 | INFO     | BeaconMedAI.utils.helpers:get_metadata_filter:267 - Starting metadata filter generation
2025-08-15 12:06:14.487 | DEBUG    | BeaconMedAI.utils.helpers:get_metadata_filter:289 - Extracted 20 terms: ['traumatic brain injury', 'symptoms', 'headaches', 'dizziness', 'cognitive difficulties', 'mri scan', 'neurological assessment', 'fractured right clavicle', 'misalignment', 'x-ray imaging', 'persistent pain', 'limited range of motion', 'surgery', 'lumbar disc herniation', 'disc protrusion', 'pain', 'lower extremities', 'physical therapy', 'pain management', 'psychological trauma']
2025-08-15 12:06:14.487 | ERROR    | BeaconMedAI.utils.helpers:get_metadata_filter:317 - Vector store query failed: 'NoneType' object has no attribute 'similarity_search'
2025-08-15 12:06:14.488 | INFO     | BeaconMedAI.utils.helpers:get_metadata_filter:325 - No chapters found. Using term-based filter.
2025-08-15 12:06:14.488 | INFO     | BeaconMedAI.utils.helpers:get_metadata_filter:327 - Term-based filter: {'terms': ['traumatic brain injury', 'symptoms', 'headaches', 'dizziness', 'cognitive difficulties', 'mri scan', 'neurological assessment', 'fractured right clavicle', 'misalignment', 'x-ray imaging', 'persistent pain', 'limited range of motion', 'surgery', 'lumbar disc herniation', 'disc protrusion', 'pain', 'lower extremities', 'physical therapy', 'pain management', 'psychological trauma']}
2025-08-15 12:06:14.488 | INFO     | BeaconMedAI.generators.report_generator:get_ama_impairment_report:98 - Using term-based query: traumatic brain injury symptoms headaches dizziness cognitive difficulties mri scan neurological assessment fractured right clavicle misalignment x-ray imaging persistent pain limited range of motion surgery lumbar disc herniation disc protrusion pain lower extremities physical therapy pain management psychological trauma
2025-08-15 12:06:14.488 | INFO     | BeaconMedAI.generators.report_generator:get_ama_impairment_report:102 - Retrieving AMA content with k=3, fetch_k=15, lambda_mult=0.5 based on 112 unique words
2025-08-15 12:06:16.183 | INFO     | BeaconMedAI.generators.report_generator:get_ama_impairment_report:107 - Initially retrieved 6 documents
2025-08-15 12:06:18.228 | INFO     | BeaconMedAI.generators.report_generator:get_ama_impairment_report:111 - Reranked to 3 documents
2025-08-15 12:06:27.077 | INFO     | BeaconMedAI.generators.report_generator:get_ama_impairment_report:149 - Generated impairment report for user Tim
2025-08-15 12:06:27.147 | INFO     | BeaconMedAI.generators.combiner:get_combine_reports:30 - Combining reports for user Tim
2025-08-15 12:06:27.147 | INFO     | BeaconMedAI.core.user_data:get_user_data:99 - Retrieved existing user data for: Tim
2025-08-15 12:06:27.164 | INFO     | BeaconMedAI.generators.combiner:get_combine_reports:45 - Similarity with previous input 1: 0.5475
2025-08-15 12:06:28.171 | ERROR    | BeaconMedAI.generators.combiner:get_combine_reports:100 - Error occurred whilst combining report: Error code: 400 - {'error': {'message': '`max_tokens` must be less than or equal to `8192`, the maximum value for `max_tokens` is less than the `context_window` for this model', 'type': 'invalid_request_error'}}
